{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCX2XkLAJIAs46WYurIDpwWcgMgeDqY11c&libraries=places"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Booking</title>
    <link rel="stylesheet" href="{% static 'styles/booking.css' %}">
    <link rel="stylesheet" href="{% static 'stles/a2_c_quiz.css' %}">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/typed.js/2.0.11/typed.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
</head>
<style>
  body{
    position  : fixed;
    margin-top   : 0%;
    margin-left  : 0%;
    margin-right : 0%;
    margin-bottom: 0%;
    padding   : 0% 0%;
    display   :  flex;
    width     :  100%;
    height    :  100%;
  }

  .btn{
    display       : flex;
    flex-direction: row;
  }

  .main{
    width  :  100%;
    padding: 0% 0%;
    height : 100%;
    display: flex;
    flex-direction: row;
    margin-top: 0%;
    margin-bottom: 0%;
  }

  .booking{
    margin-top: 0%;
    margin-left: 0%;
    padding: 0%;
    width: 50%;
    height: 100%;
    background-image: url("/static/images/mobile_view.jpg");
    background-size: cover;
    background-repeat: no-repeat;
    display: flex;
    flex-direction: column;
  }
  .slideshow{
    width:  50%;
    height: 30%;
    object-fit: cover;
    margin-left: 0%;
    margin-top :-1%;
  }
  .s1{
    object-fit: cover;
  }
  .form{
    margin-left:10%;
    margin-bottom: -10%;
    margin-top: 8%;
    width: 70%;
    height: 110%;
  }
.formclass{
    padding-top: 3%;
    border-radius: 15px;
    display: flex;
    flex-direction: column;
    background-color:rgba(39, 33, 2, 0.9);
    border: 4px solid #F6C208;
    height: 90%;
    width: 100%;
    color:white;
    align-self:flex-start;
}
.images{
  margin-top: -10%;
    display: flex;
    flex-direction: column;
    height: 100%;
    width: 60%;
}
.inp-txt1{
    padding-top: -10%;
    padding-bottom: 1%;
  margin-left: 5%;
  margin-right: -12%;
  text-align: center;
    border-radius: 5px;
    background: #575656;
    color: white;
    font-size: 30%;
    border: 1px solid #FDD406; ;
    width: 50%;
    font-size: 130%;
    height: 80%;
    align-self: flex-end;
    color:white;
}
.form-control{
     text-align: center;
    border-radius: 5px;
    background: #575656;
    color: white;
    border: 1px solid #FDD406; ;
    font-size: medium;
    width: 80%;
    height: 100%;
    margin-top: 2%;
    margin-left: 8%;
    margin-right: 2%;
    color: white;
    align-self: flex-end;
    color: white;
}
  .inp-txt{
    text-align: center;
    border-radius: 5px;
    background: #575656;
    color: white;
    border: 1px solid #FDD406; ;
    font-size: medium;
    width: 80%;
    height: 100%;
    margin-top: 1.5%;
    margin-left: 8%;
    margin-right: 2%;
    color: white;
    align-self: flex-end;
    color: white;
}
.formtext{
  color: #FFF;
  font-family: Agency FB;
  font-size: 100%;
  font-style: normal;
  font-weight: 700;
  line-height: normal;
    margin-left: 12%;
    margin-top : 2%;
    color: white;
}
::placeholder {
  color: white;
    font-size: 140%;
  opacity: 1; /* Firefox */
}
.inp-contain{
    margin: 1.5%;
    display: flex;
    color: white;
    flex-direction: row;
    font-size: 140%;
    position: relative;
    align-content: center;
    height: 50%;
    width: 100%;
}
.inp-contain1{
    display: flex;
    color: white;
    font-size: 120%;
    flex-direction: row;
    position: relative;
    align-content: center;
    color:white;
    height: 20%;
    width: 100%;
}
.sub{
margin-top: 4%;
margin-bottom: 5%;
margin-left: 15%;
margin-right: 30%;
background-color: #df9a0e; /* Change the submit button background color */
color: black;
font-family: 'Agency FB';
font-weight: bold;
padding-right: 5%;
padding-left: 5%;
border: none;
border-radius: 20px;
cursor: pointer;
font-size: 1.8rem;
}
.sub1{
margin-top: 4%;
margin-bottom: 5%;
margin-right: 10%;
background-color: #df9a0e; /* Change the submit button background color */
color: black;
font-family: 'Agency FB';
font-weight: bold;
padding-right: 5%;
padding-left: 5%;
border: none;
border-radius: 20px;
cursor: pointer;
font-size: 1.8rem;
}

.form input[type="submit"]{
  width:30%;
  height:40%;
}
@media(max-width:940px){
  .inp-txt1{
    margin-left: 2%;
  margin-right: -12%;
  text-align: center;
    border-radius: 5px;
    background: #575656;
    border: 1px solid #FDD406; ;
    width: 50%;
    font-size: 130%;
    height: 100%;
    align-self: flex-end;

  }
  .formclass{
    border-radius: 15px;
    display: flex;
    flex-direction: column;
    background-color:rgba(39, 33, 2, 0.9);
    border: 4px solid #F6C208;
    height: 140%;
    width: 120%;
    align-self:flex-start;
}
  .body{
    position: absolute;
  }
  .sub{
  margin-top: 4%;
margin-bottom: 3%;
margin-left: 10%;
margin-right: 30%;
background-color: #df9a0e; /* Change the submit button background color */
color: black;
font-family: 'Agency FB';
font-weight: bold;
padding-right: 4%;
padding-bottom: 2%;
padding-left: 4%;
border: none;
width: 10%;
border-radius: 20px;
cursor: pointer;
font-size: 1.8rem;
}
.sub1{
margin-top: 4%;
margin-bottom: 5%;
margin-left: 8%;
margin-right: 30%;
background-color: #df9a0e; /* Change the submit button background color */
color: black;
font-family: 'Agency FB';
font-weight: bold;
padding-right: 5%;
padding-left: 5%;
border: none;
border-radius: 20px;
cursor: pointer;
font-size: 1.8rem;
}
  .booking{
    width: 100%;
  }
  .slideshow{
    display: none;
  }
}

@media(max-width:480px){
    .navbar{
        background: rgba(101, 101, 23, 0.71);
    }
  .formclass{
      margin-top: 30%;
      margin-left: -10%;
    border-radius: 15px;
      font-size: 70%;
    display: flex;
    flex-direction: column;
    background-color:rgba(39, 33, 2, 0.9);
    border: 4px solid #F6C208;
    height: 110%;
    width: 120%;
    align-self:flex-start;
}
  body{
    position: absolute;
  }
  .sub{
  margin-top: 4%;
margin-bottom: 3%;
margin-left: 10%;
margin-right: 30%;
background-color: #df9a0e; /* Change the submit button background color */
color: black;
font-family: 'Agency FB';
font-weight: bold;
padding-right: 38%;
padding-bottom: 5%;
padding-left: 4%;
border: none;
width: 5%;
border-radius: 20px;
cursor: pointer;
font-size: 1.8rem;
}
.sub1{
margin-top: 4%;
margin-bottom: 5%;
margin-left: -14%;
margin-right: 30%;
background-color: #df9a0e; /* Change the submit button background color */
color: black;
font-family: 'Agency FB';
font-weight: bold;
padding-right: 5%;
padding-left: 5%;
border: none;
border-radius: 20px;
cursor: pointer;
font-size: 1.8rem;
}
  .booking{
    width: 100%;
  }
  .slideshow{
    display: none;
  }
}
  @media (max-width: 945px) {
      .form{
  margin-left:14%;
  margin-bottom: 0%;
   margin-top: 18%;
    width: 70%;
    height: 100%;
}
  }

  .mySlides {
  display: none;
}
/* Slideshow container */
.slideshow-container {
  width: 100%;
  height: 100%;
  max-height: 100vh;
}
/* The dots/bullets/indicators */
.dot {

  height: 15px;
  width: 15px;
  margin: 0 2px;
  background-color: #bbb;
  border-radius: 50%;
  display: inline-block;
  transition: background-color 0.6s ease;

}

.active {
  background-color: #717171;
}

/* Fading animation */
.fade {
  -webkit-animation-name: fade;
  -webkit-animation-duration: 1.5s;
  animation-name: fade;
  animation-duration: 1.5s;
}

@-webkit-keyframes fade {
  from {
      opacity: .4
  }

  to {
      opacity: 1
  }
}

@keyframes fade {
  from {
      opacity: .4
  }

  to {
      opacity: 1
  }
}

/* On smaller screens, decrease text size */
@media only screen and (max-width: 300px) {

  .prev,
  .next,
  .text {
      font-size: 11px
  }
}

/* Next & previous buttons */
.prev,
.next {
  cursor: pointer;
  position: absolute;
  top: 50%;
  width: auto;
  padding: 16px;
  margin-top: -22px;
  color: white;
  font-weight: bold;
  font-size: 18px;
  transition: 0.6s ease;
  border-radius: 0 3px 3px 0;
  user-select: none;
}

/* Position the "next button" to the right */
.next {
  right: 0;
  border-radius: 3px 0 0 3px;
}

/* On hover, add a black background color with a little bit see-through */
.prev:hover,
.next:hover {
  background-color: rgba(0, 0, 0, 0.8);
}
</style>
<body>
 <nav class="navbar">
        <div class="max-width">
            <ul class="menu">
                <li><a href="/home" class="menu-btn">Home</a></li>
            </ul>

            <div class="menu-btn">
                <i class="fas fa-bars"></i>
            </div>
        </div>
    </nav>
<div class="main">
  <div class="booking">
    <div class="form">
      <form method="post" action="booked" class="formclass" id="booking-form">
          {% csrf_token %}
      <div class="inp-contain">
          <input class="inp-txt" type="text" style="font-size: 80%"  name="name" placeholder="enter your name" value="">
      </div>
      <div class="inp-contain">
          <input type="text" class="form-control" name="phoneno" style="font-size: 80%" placeholder="enter your phone number" required>
      </div>
      <div class="inp-contain">
          <input class="inp-txt" style="font-size: 80%" type="date" name="date" placeholder="" value="">
      </div>
      <div class="inp-contain">
          <input class="inp-txt"  style="font-size: 80%" type="time" name="time" placeholder="" value="">
      </div>
      <div class="inp-contain">
          <input class="inp-txt" type="text" style="font-size: 80%" name="pickup" id= 'origin' placeholder="Pickup" value="">
      </div>
      <div class="inp-contain">
          <input class="inp-txt" type="text" style="font-size: 80%" name="dropoff" id= 'destination' placeholder="Drop Off" value="">
      </div>
      <div class="inp-contain">
          <select class="inp-txt" style="font-size: 80%" id= "vtype" type="text" name="chooseride" value="">
              {% for car in cars  %}
                  <option value="{{ car.code }}">{{ car.name }}</option>
              {% endfor %}
          </select>
      </div>
      <div class="inp-contain">
          <label class="inp-txt" style="font-size: 80% ;align-content: center" id = "estimatep">ESTIMATE PRICE </label>
      </div>
      <div class="inp-contain">
          <label class="inp-txt" style="font-size: 80%" id="estimatet">TRAVEL TIME </label>
      </div>
      <div class="inp-contain1">
          <label class="formtext">TWO WAYS </label>
          <input type="checkbox" name = "twoways" id = "twoways" style ="width: 10%">
          <label class="inp-txt1"  id= 'result' style="margin-right: 10%">DISTANCE</label>
      </div>
      <div class="inp-contain">
          <input type="email" class="form-control" name="email" style="font-size: 100%" placeholder="Email" required>
      </div>
      <div class="btn">
          <button  class="sub" onclick = "calculateDistance()" id = "checkfare" type="button">CHECK FARE</button>
          <input type="submit" class="sub1" value="BOOK">
      </div>
    </form>
  </div>
</div>
<div class="slideshow">
   <div class="slideshow-container">
    <div class="mySlides fade">
        <img src="/static/images/img1.jpg" style="width: 100%;height: 110vh">

    </div>
    <div class="mySlides fade">

        <img src="/static/images/img2.jpg" style="width: 100%;height: 110vh">

    </div>
    <div class="mySlides fade">

        <img src="/static/images/img3.jpg" style="width: 100%;height: 110vh">

    </div>
    <div style="text-align:center; margin:-5%;">

        <span class="dot"></span>
        <span class="dot"></span>
        <span class="dot"></span>

    </div>
</div>
</div>
</div>
<script src="{% static 'js/script.js' %}"></script>
<script src="{% static 'js/scriptbook.js' %}"></script>
<script>
        document.addEventListener("DOMContentLoaded", function() {
          const form = document.getElementById("booking-form");

          // Listen for keypress events on the form
          form.addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
              event.preventDefault(); // Prevent the default form submission
              // Optionally, you can focus on the submit button or perform other actions here.
            }
          });
        }
        );
        function calculateDistance() {
            var origin = document.getElementById('origin').value;
            var destination = document.getElementById('destination').value;
            var type = document.getElementById("vtype").value;
            var twoway = document.getElementById("twoways").checked;

            var service = new google.maps.DistanceMatrixService();
            service.getDistanceMatrix({
                origins: [origin],
                destinations: [destination],
                travelMode: 'DRIVING',
                unitSystem: google.maps.UnitSystem.METRIC
            }, function(response, status) {
                if (status === 'OK') {
                    var distance = response.rows[0].elements[0].distance.text;

                    fetch('calculate_price', {
                        method: 'POST',
                        body: JSON.stringify({ type, distance, twoway }),
                        headers: {
                            'Content-Type': 'application/json',
                            'X-CSRFToken': getCookie('csrftoken')
                        }
                    })
                    .then(response => response.json())
                    .then(data => {
                        // Update the result elements with the calculated values
                        document.getElementById("estimatep").textContent = "ESTIMATED PRICE: " + data.cost;
                        document.getElementById("estimatet").textContent = "ESTIMATED TIME: " + data.time;
                        document.getElementById('result').textContent = "Distance: " + data.distance + "Km";
                    })
                    .catch(error => {
                        console.error('Error calculating distance:', error);
                    });
                } else {
                    document.getElementById('result').textContent = "Error calculating distance.";
                }
            });
        }

        // Autocomplete for origin and destination input fields
        var originInput = document.getElementById('origin');
        var destinationInput = document.getElementById('destination');
        var originAutocomplete = new google.maps.places.Autocomplete(originInput);
        var destinationAutocomplete = new google.maps.places.Autocomplete(destinationInput);
        // Function to get CSRF token from cookies
          function getCookie(name) {
            var value = "; " + document.cookie;
            var parts = value.split("; " + name + "=");
            if (parts.length === 2) return parts.pop().split(";").shift();
        }
    </script>
<script src="{% static 'js/a3_js_quiz.js' %}"></script>

</body>
</html>