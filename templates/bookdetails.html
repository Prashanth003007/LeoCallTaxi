{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LeoCallTaxi</title>
    <link rel="stylesheet" href="{% static 'styles/bookdetails.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/typed.js/2.0.11/typed.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
    <link rel="icon" type="image/x-icon" href="{% static 'favicon.ico' %}">

    <style>
        body{
            background-image: url("/static/images/desktop_backgroud.jpg");
        }
        @media (max-width:900px) {
            body {
                background-image: url("/static/images/mobile_view.jpg");
            }
        }
        .wee_exp{
            margin-left:360%;
            height: 50%;
    padding:5%;
    background-color: #df9a0e;
    border-radius: 10%;
    font-size: 150%;
    font-weight: bolder;
}
        .export{
            display: flex;
        }
.who_exp{
    margin-left: 50%;
    margin-bottom: 150%;
    padding: 5%;
    background-color: #df9a0e;
    border-radius: 10%;
    font-size: 150%;
    font-weight: bolder;
}
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="max-width">
            <ul class="menu">
                <li><a href="login" class="menu-btn">Home</a></li>
                <li><a href="contactdev" class="menu-btn">Contact developers</a></li>
            </ul>
             <a class="person_icon" href="logoutpage"><i class='far fa-user' style='font-size:20px;color:white'></i></a>

            <div class="menu-btn">
                <i class="fas fa-bars"></i>
            </div>
        </div>

    </nav>
    <div class="table-container">
    <div class ='export'>
                        <button class="wee_exp" onclick="wkexp();">Weekly Export</button>
                        <button class="who_exp" onclick="whexp();">Whole Export</button>
    </div>
        <table>
            <thead>
                <tr>
                    <th>S.NO</th>
                    <th>NAME</th>
                    <th>DATE</th>
                    <th>TIME</th>
                    <th>PHN NO.</th>
                    <th>PICKUP</th>
                    <th>DROP OFF</th>
                    <th>RIDE</th>
                    <th>PRICE</th>
                </tr>
            </thead>
            <tbody>
                {% for detail in bookingdetails %}
                    <tr >
                    <td >{{ forloop.counter }}</td>
                    <td >{{ detail.name }}</td>
                    <td >{{ detail.pickupdate }}</td>
                    <td >{{ detail.pickuptime }}</td>
                    <td >{{ detail.phone }}</td>
                    <td >{{ detail.pickup }}</td>
                    <td >{{ detail.dropoff }}</td>
                    <td >{{ detail.ride.name }}</td>
                    <td >{{ detail.efare }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <script src="{% static 'js/script.js' %}"></script>
<script>
    function wkexp() {
        fetch('week_export', {
                          method: 'POST',
                          body: JSON.stringify({}),
                          headers: {
                            'Content-Type': 'application/json',
                            'X-CSRFToken': getCookie('csrftoken') // Ensure you have a function to get the CSRF token
                          },
                    }
        )
    }
    function whexp() {
        fetch('whole_export', {
                          method: 'POST',
                          body: JSON.stringify({}),
                          headers: {
                            'Content-Type': 'application/json',
                            'X-CSRFToken': getCookie('csrftoken') // Ensure you have a function to get the CSRF token
                          },
                    }
        )
    }
</script>
</body>
</html>
